<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <title>Title</title>

    <script>
        var placeNumber = '';

        $(document).ready(function () {
            test();
            $('#body').change(function () {
                placeNumber = $('input[type=radio][name=place]:checked').attr('value');
                // alert(placeNumber);
                // selectPlace();
            });
        });

        function test() {
            $.ajax({
                method: 'get',
                url: 'places',
                contenttype: 'application/json',
                success: function (data) {
                    var option = '';
                    var rows = 1;
                    var places = 1;
                    var condition = '';
                    // for (var i = 0; i < data.length; i++) {
                    //     option += '<tr>' +
                    //         '<td>' + rows + '</td>' +
                    //         '<td><input type="radio" name="name" value="' + data[i] + '" >Ряд ' + rows + ' Место ' + places++ + '</td>' +
                    //         '<td><input type="radio" name="name" value="' + data[i++] + '">Ряд ' + rows + ' Место ' + places++ + '</td>' +
                    //         '<td><input type="radio" name="name" value="' + data[i++] + '">Ряд ' + rows + ' Место ' + places++ + '</td>' +
                    //         '</tr>';
                    //     rows++;
                    //     places = 1;
                    // }

                    for (var i = 0; i < data.length; i++) {
                        option += '<tr>' +
                            '<td>' + rows + '</td>';
                        if (data[i].condition == true) {
                            condition = 'disabled';
                        } else condition = '';
                        option += '<td><input type="radio" name="place" value="' + data[i].num + '" ' + condition + '>Ряд ' + rows + ' Место ' + places++ + ' №места: ' + data[i].num + '</td>';
                        if (data[i+1].condition == true) {
                            condition = 'disabled';
                        } else condition = '';
                        option += '<td><input type="radio" name="place" value="' + data[++i].num + '" ' + condition + '>Ряд ' + rows + ' Место ' + places++ +' №места: ' + data[i].num + '</td>';
                        if (data[i+1].condition == true) {
                            condition = 'disabled';
                        } else condition = '';
                        option += '<td><input type="radio" name="place" value="' + data[++i].num + '" ' + condition + '>Ряд ' + rows + ' Место ' + places++ + ' №места: ' + data[i].num + '</td>' +
                            '</tr>';
                        rows++;
                        places = 1;
                    }

                    $('#body').html(option);
                }
            });
        }

        function redirect() {
            if (placeNumber != '') {
                $.ajax({
                    type: 'post',
                    url: 'places',
                    data: JSON.stringify(placeNumber),
                    dataType: 'json'
                });
                location.href = 'http://localhost:8080/moviehouse/payment.html';
            }
        }

        function selectPlace() {
            $.ajax({
                type: 'post',
                url: 'places',
                data: JSON.stringify(placeNumber),
                dataType: 'json'
            });
        }
    </script>
</head>
<body>
<h2 id="fir">Paragraph</h2>

<table id="table" style="border: 1px solid black;" cellpadding="1"; border="1">
    <th>
        <tr><td>Ряд \ Место</td><td>1</td><td>2</td><td>3</td></tr>
    </th>
    <tbody id="body">
    <!--<tr>-->
        <!--<td>1</td>-->
        <!--<td><input type="radio" name="name" id="place_id" value="0">Ряд1 место 1</td>-->
        <!--<td><input type="radio" name="name" value="1">Ряд1 место 2</td>-->
        <!--<td><input type="radio" name="name" value="2">Ряд1 место 3</td>-->
    <!--</tr>-->
    </tbody>
</table><br><br>
<!--<input type="button" onclick="alert($('input[type=radio][name=place]:checked').attr('value'))" value="click me to get id of checked input" />-->
<!--<button onclick="location.href = 'http://localhost:8080/moviehouse/payment.html'">but</button>-->
<button onclick="redirect()">Оплатить</button>
</body>
</html>